---
title: "Water Quality Time Series Analysis"
output: html_notebook
author: Brandon Bagley
---
```{r setup}
library(tidyverse)
#
raw_water <- read.csv('./data/resdetectqntlmt.csv', header = T)
raw_ow <- read.csv('./data/dvstat', quote = '#', header = T, skip = 49, sep = '\t')
```
```{r}
head(raw_water)
```

```{r munging}
#head(raw_water)
# unique(raw_water$CharacteristicName)
water_sample <- raw_water %>% 
  select(OrganizationIdentifier, ActivityIdentifier, MonitoringLocationIdentifier, 
         ResultIdentifier, CharacteristicName, DetectionQuantitationLimitTypeName, 
         DetectionQuantitationLimitMeasure.MeasureValue, DetectionQuantitationLimitMeasure.MeasureUnitCode, ProviderName) %>% 
  filter(CharacteristicName == c("Manganese", "Lead", "Nitrate", "Nitrite", 
                                 "Phosporus", "Nitrogen", 'Carbon', 'Nitrogen', 
                                 'Calcium', 'Magnesium', 'Sodium', 'Potassium', 
                                 'Chloride', 'Sulfate', 'Silica', 'Specific conductance', 
                                 'Total dissolved solids'))
head(water_sample)
```


Data for surface water was also downloaded from the USGS with a large header.
```{r surf_munging}
head(raw_ow)
parameter <- data.frame()
00010		Temperature, water, degrees Celsius		129713	
00060		Discharge, cubic feet per second		129714
00095		Specific conductance, water, unfiltered, microsiemens per centimeter at 25 degrees Celsius		129717
00300		Dissolved oxygen, water, unfiltered, milligrams per liter		129720
80154		Suspended sediment concentration, milligrams per liter		129723
80155		Suspended sediment discharge, short tons per day		129724
```

# agency_cd  agency code
# site_no    USGS site number
#
#
# Sites in this file include:
# USGS 03407876 SMOKY CREEK AT HEMBREE, TN
# 
# Explanation of Parameter Code and ts_id used in the Statistics Data 
# parameter_cd	Parameter Name					ts_id	Location Name
# 00010		Temperature, water, degrees Celsius		129713	
# 00060		Discharge, cubic feet per second		129714	
# 00095		Specific conductance, water, unfiltered, microsiemens per centimeter at 25 degrees Celsius		129717	
# 00300		Dissolved oxygen, water, unfiltered, milligrams per liter		129720	
# 80154		Suspended sediment concentration, milligrams per liter		129723	
# 80155		Suspended sediment discharge, short tons per day		129724	
#
# Data heading explanations.
# begin_yr_dt ... First complete year of data of daily mean values for this day.
# end_yr_dt   ... Last complete year of data of daily mean values for this day.
# max_va      ... Maximum of daily mean values for this day.
# min_va      ... Minimum of daily mean values for this day.
# mean_va     ... Mean of daily mean values for this day.
# p05_va      ... 05 percentile of daily mean values for this day.
# p10_va      ... 10 percentile of daily mean values for this day.
# p20_va      ... 20 percentile of daily mean values for this day.
# p25_va      ... 25 percentile of daily mean values for this day.
# p50_va      ... 50 percentile (median) of daily mean values for this day.
# p75_va      ... 75 percentile of daily mean values for this day.
# p80_va      ... 80 percentile of daily mean values for this day.
# p90_va      ... 90 percentile of daily mean values for this day.
# p95_va      ... 95 percentile of daily mean values for this day.